<!DOCTYPE html>
<html>
<head lang="en">
   <meta charset="utf-8">
   <title>Activity Log</title>
   <script src="Stay.js"></script>
   <script>

      // Wait until the window finishes loaded before executing any script
      window.onload = function() {

        // Initialize the activityNumber
        var activityNumber = 3;

        // Select the add_activity button
        var addButton = document.getElementById("add_activity");

        // Select the calculate button
        var calcButton = document.getElementById("calculate");

        // Select the table element
        var tracklistTable = document.getElementById("tracklist");

        // Attach handler to the button click event
        addButton.onclick = function() {

        // Add a new row to the table using the correct activityNumber
          tracklistTable.innerHTML += '<tr><td>' + activityNumber + '</td><td><label>Person ' + activityNumber + ': </label><br/><input type="text" name="person' + activityNumber + ' id="person' + activityNumber + ' class="required"></td><td><input type="text" name="nights' + activityNumber + '" class="required"></td></tr>';

          // Increment the activityNumber
          activityNumber += 1;
        }

        document.getElementById("calculate").addEventListener("click", function() {

          const stay = new Stay(document.getElementById("totalCost").value, document.getElementById("totalNights").value);

          var inputs, index;

          //Create NodeList
          inputs = document.getElementsByTagName('input');

          //convert nodelist into array
          var inputsArr = Array.from(inputs);



          for (index = 0; index < inputs.length-3; ++index) {
            var per, night;

            per = inputsArr[index].value;
            index++;
            night = inputsArr[index].value;

            stay.AddPerson(per,  Array.from(String(night), Number));
          }

        }, false);

      }

   </script>

</head>

<body>
  <div class="container">
      <div class="row">
          <div class="leftcol">
              <form name='mainForm' id='mainForm' method="get" action="#">
                <fieldset>
                   <legend>Input Information</legend>
                   <table id="tracklist">
                    <tr>
                      <th colspan="3">Track List: </th>
                    </tr>
                    <tr>
                      <td>1</td>
                      <td> <label>Person 1: </label> <br/> <input type="text" id="person1" name="person1" value="" class="required"><input type="text" name="nights1" class="required"> </td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td><label>Person 2: </label><br/><input type="text" name="person2" id="person2" class="required"><input type="text" name="nights2" class="required"></td>
                    </tr>
                   </table>
                   <input type="submit" />
                </fieldset>
              </form>
              <button id="add_activity">Add Person</button>
              <button id="calculate">Calculate</button>
              <label>Total Cost: </label>
              <input type="text" name="totalCost" id="totalCost" class="required">
              <label>Total Number of Nights: </label>
              <input type="number" name="person2" id="totalNights"class="required">
          </div>
      </div>
  </div>
</body>
</html>